---
import Logo from "@/assets/images/logo.png"; 
import PlaceHolderLogo from "../logoComponent.astro"
import ShapeOne from "./shape-1.astro";
const { serviceList } = Astro.props; 
---
<!-- header-lower -->
<div 
id="header-lower"
class="header-lower font-[Monserrat]"
>
    <div class="auto-container">
        <div class="justify-between flex flex-nowrap">
            <div class="logo-box p-5 sm:py-[37.5px] my-auto">
                <ShapeOne />
                <figure class="logo">
                    <a href="index.html"><PlaceHolderLogo /></a>
                </figure>
            </div>
            <div class="menu-area clearfix my-auto">
                <!--Mobile Navigation Toggler-->
                <div
                    id="mobile-nav-toggler"
                    class="mobile-nav-toggler"
                >
                    <i class="icon-bar"></i>
                    <i class="icon-bar"></i>
                    <i class="icon-bar"></i>
                </div>
                <nav class="main-menu navbar-expand-md navbar-light">
                    <div class="" id="navbarSupportedContent">
                        <ul class="navigation clearfix flex">
                            <li class="current dropdown text-[#25283a] z-[99] cursor-pointer !block"><a href="../">Home</a>
                            </li>
                            <li class="dropdown"><a href="../about">About</a>
                            </li> 
                            <li class="dropdown"><a href="/services">Services</a>
                                {serviceList && serviceList.length > 0 &&
                                <ul>
                                    {serviceList.map((service) =>{
                                        const urlTitle = `../../services/${(service.title.toLowerCase()).replace(/\s+/g, '_')}`
                                        return <li><a href={urlTitle}>{service.title}</a></li>
                                    }
                                        )}
                                </ul>
                                }

                            </li> 
                            <li class="dropdown"><a href="/blog/1">Blog</a></li>  
                            <li><a href="../../contact">Contact</a></li> 
                        </ul>
                    </div>
                </nav>
            </div>
            <div class="hidden sm:flex relative items-center justify-center py-[30px]">
                <div class="btn-box"><a href="index.html" class="theme-btn btn-one">Get A Quote</a></div>
            </div>
        </div>
    </div>
</div>
<script>
    const MobileToggler = document.getElementById("mobile-nav-toggler")
    const MobileMenu = document.getElementById("mobile-menu")
    const Backdrop = document.getElementById("backdrop"); 
    const OpenMenu = () =>{
        if(MobileMenu?.classList.contains("mobile-menu-close")){
            MobileMenu?.classList.remove("mobile-menu-close")
            Backdrop?.classList.add("backdrop-visible")
        }
        else{
            MobileMenu?.classList.add("mobile-menu-close")
            Backdrop?.classList.remove("backdrop-visible")
        }
    }
    MobileToggler?.addEventListener('mousedown', OpenMenu)
    const CheckIfClickedOutside = (event : MouseEvent) =>{
        if(!MobileMenu?.classList.contains("mobile-menu-close") 
            && !MobileToggler?.contains(event.target as Node)
            && !MobileMenu?.contains(event.target as Node)
        ){
            MobileMenu?.classList.add("mobile-menu-close")
            Backdrop?.classList.remove("backdrop-visible")
        }
    }
    window.addEventListener("mousedown", CheckIfClickedOutside)
</script>